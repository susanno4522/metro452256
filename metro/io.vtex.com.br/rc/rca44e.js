function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _iterableToArrayLimit(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}this.window=this.window||{},this.window.NavigationCapture=function(e){"use strict";var n=2;function t(e){e=new RegExp("(^| )".concat(e,"=([^;]+)")),e=document.cookie.match(e);if(e)return decodeURI(e[n])}function r(e,n,t){var n=encodeURI(n),r=window.location.hostname,o=new Date,t=(o.setTime(o.getTime()+t),o.toUTCString());document.cookie="".concat(e,"=").concat(n,"; expires=").concat(t,"; path=/; domain=").concat(r)}var o="VtexRCSessionIdv7",a="VtexWorkspace",i="VtexRCMacIdv7";function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})}function c(){var e=null!=(e=d())?e:s();r(o,e,18e5)}function l(){var e=t(i),n=null!=e?e:s();return r(i,n,31536e6),{macID:n,isNewUser:!e}}function u(){return{sessionID:d(),userSessionInfo:l(),workspace:null!=(e=null!=(e=null!=(e=function(){var e=t(a);return _slicedToArray(null!=(e=null==e?void 0:e.split(":"))?e:[],1)[0]}())?e:function(){var e=new RegExp(/[?&]workspace=([^&]+)(&|$)/).exec(window.location.search);return null==e?void 0:e[1]}())?e:function(){var e;return null==(e=null===window||void 0===window?void 0:window.__RUNTIME__)?void 0:e.workspace}())?e:"",pageTitle:document.title,url:window.location.href,ref:window.document.referrer,path:window.location.pathname,hostName:window.location.hostname,accountName:null!=(e=null==(e=window.__RUNTIME__)?void 0:e.account)?e:window.jsnomeLoja};var e}function d(){return t(o)}var w,m,p="https://rc.vtex.com.br/api/events",v="https://rc.vtex.com/v8",f="Event",y=1e4,x=["productView","otherView","categoryView","homeView","departmentView","internalSiteSearchView","cart","cartLoaded","payment","email","orderPlaced","profile","shipping"];function h(e){return null!=e&&e.namespace&&e.name&&null!=e.value?g("CustomMetric",e):(e=e?e.namespace?e.name?"metric.value":"metric.name":"metric.namespace":"metric",console.error("".concat(e," is not defined")))}function T(t,r){return new Promise(function(e){var n=new XMLHttpRequest;n.timeout=y,n.open("POST",r,!0),n.setRequestHeader("Content-Type","application/json"),n.send(t),n.onload=function(){if((200===n.status||202===n.status)&&r===p)return c(),e(t)}})}function g(n,e){if(!n)return console.error("Event name is not defined");r=n,e=e,e=Object.assign({},e),t=u(),e=Object.assign(Object.assign({},e),{DataType:e.DataType||f,RequestType:r,SessionId:t.sessionID,MacId:t.userSessionInfo.macID,IsNewUser:t.userSessionInfo.isNewUser,workspace:t.workspace,Url:t.url,Ref:t.ref,Path:t.path,HostName:t.hostName,pageTitle:t.pageTitle,accountName:t.accountName});var t,r=JSON.stringify(e);return null!=x.find(function(e){return e===n})&&T(r,v),T(r,p)}function b(e){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,1)}function _(){"complete"===document.readyState?E():window.attachEvent?window.attachEvent("onload",E):window.addEventListener("load",E,!1),window.history.pushState=S("pushState"),window.history.replaceState=S("replaceState")}function E(){b(function(){var e,n=performance.timing,t=performance.getEntriesByType("navigation")[0],t=t?(e={pageLoadTime:t.duration,pageRenderTime:t.loadEventEnd-t.responseEnd,timeToFirstByte:t.responseStart-t.startTime,domLoadTime:t.domComplete-t.responseEnd},t.domContentLoadedEventEnd-t.responseStart):(e={pageLoadTime:n.loadEventEnd-n.navigationStart,pageRenderTime:n.loadEventEnd-n.responseEnd,timeToFirstByte:n.responseStart-n.navigationStart,domLoadTime:n.domComplete-n.responseEnd},n.domContentLoadedEventEnd-n.responseStart),n={NetworkingTime:e.timeToFirstByte,PageRenderingTime:e.pageRenderTime,DomProcessingTime:t};g("PerformanceTiming",e),g("Timing",n)})}function S(a){var i=window.history[a];return function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=i.apply(this,n),o=new Event(a.toLowerCase());return o.arguments=n,window.dispatchEvent(o),r}}function I(){if(window.vtexrca)for(Object.defineProperty(window.vtexrca.q,"push",{value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.forEach(A)}});0<window.vtexrca.q.length;)!function(){var e=window.vtexrca.q.shift();b(function(){return A(e)})}()}function A(e){var e=_toArray(e),n=e[0],t=e.slice(1);switch(n.toLowerCase()){case"sendevent":var r=_slicedToArray(t,2);g(r[0],r[1]);break;case"sendmetric":h(_slicedToArray(t,1)[0]);break;case"init":break;default:console.error("invalid method name: ".concat(n))}}return window.vtex&&window.vtex.events?null!=(m=null==(w=null==(w=window.vtex)?void 0:w.events)?void 0:w.subscribe)&&m.call(w,"NavigationCapture",g):(window.vtex||(window.vtex={}),window.vtex.events={},window.vtex.events.listeners={},window.vtex.events.listeners.NavigationCapture={callback:g,whitelist:[],blacklist:[]}),c(),_(),I(),e.sendEvent=g,e.sendMetric=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=rc.js.map
